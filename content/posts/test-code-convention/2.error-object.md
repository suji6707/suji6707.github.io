+++
title = 'Error ê°ì²´'
date = 2024-09-21T00:20:22+09:00
draft = true
+++
## Error ê°ì²´ì— ëŒ€í•´

---
ğŸ
CError(err, 'string') ì´ì–´ì•¼í•¨.
CError('string', err)ë¡œ í•˜ë©´ err ì „ì²´ê°€ response Messageë¡œ ì „ì†¡ë¨ ã…‹ã…‹ã…‹..

** ê·¼ë° CError(err, 'string')ë¡œ í•  ê²½ìš°
responseMessageì— stringì´ ê°€ê²Œë˜ëŠ”ë°- ê·¸ê±¸ ì›ì¹˜ì•Šê³  ë¡œê·¸ìš©ìœ¼ë¡œë§Œ ì›í•œë‹¤ë©´ (ì „ë‹¬ì€ internal server error)
throw CErrorê°€ ì•„ë‹Œ ê·¸ëƒ¥ throw Errorë¥¼ í•´ì•¼í•¨.
-> ê·¸ë˜ì„œ DB repository ìª½ì—ëŠ” ëŒ€ë¶€ë¶„ ê·¸ëƒ¥ Errorë¥¼ í•´ì„œ ì™¸ë¶€ì—ëŠ” ê·¸ ì´ìœ ë¥¼ ë³´ì—¬ì£¼ì§€ ì•ŠëŠ”ê²Œ ì¢‹ìŒ.

throw CError -> ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ catch(err), res.setError(err) í•˜ë©´
```js
res.status(status).json({
    status : 'error',
    result_code : status,
    error_msg : message,
});
```
ì´ë ‡ê²Œ error_msgëŠ” responseMessageë¡œ ê°.

* ìœ„ì—ì„œ CErrorë¥¼ ë˜ì§€ê³  catchì—ì„œ ê·¸ëŒ€ë¡œ CErrorê°€ ë‚˜ê°€ê²Œ í•˜ê³ ì‹¶ìœ¼ë©´
throw err; í•˜ë©´ ë¨.
-> ë‹¤ë¥¸ ì—ëŸ¬ ë°œìƒì‹œ ë°–ì—ëŠ” INTERNAL_SERVER_ERRORë¡œ ë‚˜ê°
ì™œëƒë©´
setError ì •ì˜ì—ì„œ CErrorê°€ ì•„ë‹Œê²½ìš° CErrorë¡œ ë§Œë“¤ì–´ì„œ ë³´ë‚´ëŠ”ë°, ì´ë•Œ string(responseMessage)ì´ ì•ˆë¶™ê¸° ë•Œë¬¸.
```js
    if (!(err instanceof CError)) {
        err = new CError(err);
    }
```

```js
async submitInappropriateSearch(data: ISearchReport): Promise<boolean> {
	try {
		const { original, translated } = data;
		throw new Error('oh no')

		if (!original || !translated) {
			throw new CError('Original and Translated text are required');
		}
		const jsonString = JSON.stringify(data);
		await TranslationInappropriateReport.save(jsonString);
		return true;
	} catch (err) {
		throw err;
	}
}
```



---
CError íŒŒì¼
```js
throw new Error("string")
//-> err instanceof Error
message = err.message // string
responseMessage = "INTERNAL_SERVER_ERROR"
stack = err.stack
status = 500
```

ğŸ’ ì¤‘ìš”
throw new CError("string")
-> CErrorì— ìŠ¤íŠ¸ë§ì„ ë„£ì„ ê²½ìš°
responseMessageì— ì˜ ë“¤ì–´ê°€ê³ ,
status = 400ì„.

CError(err, 'string') ì´ë©´ ê¸°ë³¸ 500ì—ëŸ¬.
const err = new CErrorë¡œ ë§Œë“¤ê³  status ì½”ë“œ ì§ì ‘ ì„¤ì •.


---
ê¸°ë³¸
Error ê°ì²´ì˜ ì£¼ìš” ì†ì„±ë“¤ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:
1.name: ì˜¤ë¥˜ì˜ ì´ë¦„ì„ ë‚˜íƒ€ë‚´ëŠ” ë¬¸ìì—´ì…ë‹ˆë‹¤. ê¸°ë³¸ê°’ì€ "Error"ì…ë‹ˆë‹¤.
2.message: ì˜¤ë¥˜ì— ëŒ€í•œ ì„¤ëª… ë©”ì‹œì§€ì…ë‹ˆë‹¤.
3.stack: ì˜¤ë¥˜ê°€ ë°œìƒí•œ ìœ„ì¹˜ì˜ ìŠ¤íƒ ì¶”ì  ì •ë³´ì…ë‹ˆë‹¤.
