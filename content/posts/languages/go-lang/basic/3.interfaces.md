+++
title = 'Boot'
date = 2025-01-05T00:20:22+09:00
draft = true
+++
# Interfaces
μΈν„°νμ΄μ¤λ” λ‹¨μ§€ λ©”μ„λ“ μ‹κ·Έλ‹μ²μ μ§‘ν•©μ΄λ‹¤.
method 'signatures'κ°€ κ°™μΌλ©΄ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•λ” κ²ƒμ„.

type μ΄λ¦„ interface {
    λ©”μ„λ“1() λ°ν™νƒ€μ…
    λ©”μ„λ“2() λ°ν™νƒ€μ…
}


π”΄rect, circleμ€ shapeλΌλ” μΈν„°νμ΄μ¤λ¥Ό κ°–κ³ μλ‹¤(has)
shapeλΌλ” μΈν„°νμ΄μ¤λ¥Ό κ°–κ³  μλ” κµ¬μ΅°μ²΄λ“¤μ€ λ¨λ‘ μΈμλ΅ ν—μ©ν•λ‹¤

func printShapeData(s shape) {

νƒ€μ…μ¤ν¬λ¦½νΈμ—μ„
implements = 'IS' (abstract class)
extends = 'HAS'

Goμ—μ„
interface = 'HAS'

* ν…μ¤νΈμΌ€μ΄μ¤μ—μ„ νΉμ • κµ¬μ΅°μ²΄μ— λ€μ…ν•κ³  μμ.
```
type testCase struct {
    emp      employee
    expected int
}
tests := []testCase{
    {contractor{name: "Jill", hourlyPay: 872, hoursPerYear: 982}}, 
    ...
}
```
=> contractor νƒ€μ… κ°μ²΄λ¥Ό employee νƒ€μ…μΌλ΅ μ‚¬μ©ν•λ ¤ ν•¨.

* type interface vs type struct
νƒ€μ…μ€ μΈν„°νμ΄μ¤ λ©”μ„λ“λ“¤μ„ κµ¬ν„ν•λ”λ°. λ‹¤λ¥Έ μ–Έμ–΄λ“¤κ³Ό λ‹¬λ¦¬ λ…μ‹μ μ€ μ„ μ–Έμ΄ μ—†μ. => λ¨λ“  λ©”μ„λ“λ¥Ό κµ¬ν„ν•λ©΄ μλ™μΌλ΅ μΈν„°νμ΄μ¤λ¥Ό κ°–κ²λλ”λ“―
π”Ή λ‹¨, λ¦¬μ‹λ²„λ¥Ό λ…μ‹ν•΄μ•Ό κµ¬ν„μΌλ΅ μΈμ •λ¨. μ—°κ²°μ΄ λλ ¤λ©΄
-> λ¦¬μ‹λ²„κ°€ μΈμλ΅ λ“¤μ–΄μ¨ κ²ƒμ„.
λ¦¬μ‹λ²„μ™€ λ³„κ°λ΅ μΈν„°νμ΄μ¤ λ©”μ„λ“μ— λ‹¤λ¥Έ argsλ¥Ό λ„£μ–΄λ„ λλ‹¤.

## Type Assertion
Cast to underlying type

c, ok := s.(circle)
- sλ¥Ό circle νƒ€μ…μΌλ΅ λ‹¨μ–Έ

νƒ€μ… μ¤μ„μΉμ—μ„λ§ μ‚¬μ©. vλ” eκ°€ κ²€μ‚¬λ κµ¬μ²΄μ  νƒ€μ…μΌλ΅ λ³€ν™λ κ°μ²΄.
```
switch v := e.(type) {
    case email: 
        return v.toAddress, v.cost()

fmt.Printf("%T\n", v) : νƒ€μ… 
```
func printNumericValue(num interface{}) {
- λ¨λ“  νƒ€μ…μ„ λ‚νƒ€λƒ„. 
- μ–΄λ–¤ νƒ€μ…μ κ°’μ΄λΌλ„ interface{} νƒ€μ…μ λ³€μμ— ν• λ‹Ήν•  μ

* Inherit κ°λ…
type firetruck interface {
	car // -> κ³µν†µ μΈν„°νμ΄μ¤λ¥Ό μ„λ² λ”©ν•¨.
	HoseLength() int
}

* μΈν„°νμ΄μ¤ νΉμ„±
- μΈν„°νμ΄μ¤λ” ν΄λμ¤κ°€ μ•„λ‹. μƒμ„±/ν•΄μ  λ΅μ§ ν•„μ”μ—†μ.
syntax sugarλ΅ μƒμ†μ„ ν•  μ μλ” κ²ƒ. 
- μ¤‘λ³µκµ¬ν„ ν•„μ”. κ° νƒ€μ…μ€ μμ‹ μ λ©”μ„λ“λ¥Ό μ κ³µν•΄μ•Ό 
- μΈν„°νμ΄μ¤λ” μμ‹ μ„ κµ¬ν„ν•λ” νƒ€μ…μ— λ€ν•΄ μ•„λ¬΄λ° μ •λ³΄λ„ κ°€μ§€μ§€ μ•μ
-> μμ‹ μ„ κµ¬ν„ν•  νΉμ • νƒ€μ…μ— μ ν•μ μΈ λ©”μ„λ“λ¥Ό λ§λ“¤μ§€ λ§λΌλ”.

---
## λ¦¬μ‹λ²„

**Goμ `s *greetService`λ” C μ–Έμ–΄μ κµ¬μ΅°μ²΄ ν¬μΈν„°μ™€ λ§¤μ° μ μ‚¬ν• κ°λ…**μ…λ‹λ‹¤. μ΄λ΅ μΈν•΄ Go μ½”λ“μ—μ„ κµ¬μ΅°μ²΄λ¥Ό λ©”μ„λ“ λ¦¬μ‹λ²„λ΅ μ‚¬μ©ν•λ” λ°©μ‹μ€ Cμ—μ„ κµ¬μ΅°μ²΄ ν¬μΈν„°λ¥Ό μ‚¬μ©ν•μ—¬ ν•¨μμ™€ λ°μ΄ν„°λ¥Ό μ—°κ²°ν•λ” κ²ƒκ³Ό λΉ„μ·ν•©λ‹λ‹¤.

---

### **1. C μ–Έμ–΄μ—μ„ κµ¬μ΅°μ²΄ μ •μ**

λ¨Όμ € Goμ—μ„μ κµ¬μ΅°μ²΄ μ •μμ™€ ν¬μΈν„° λ¦¬μ‹λ²„λ¥Ό C μ½”λ“λ΅ λ³€ν™ν•΄ λ΄…μ‹λ‹¤.

Go μ½”λ“:

```go
type greetService struct {
    ctx context.Context
    name string
}
```

C μ½”λ“:

```c
#include <stdio.h>
#include <string.h>

// κµ¬μ΅°μ²΄ μ •μ
typedef struct {
    void* ctx;        // context λ€μ‹  void*λ΅ μ„ μ–Έ (Goμ™€ μ©μ–΄κ°€ λ‹¤λ¦„)
    char name[50];    // name ν•„λ“ (κ³ μ •λ κΈΈμ΄μ λ¬Έμμ—΄λ΅ μ„¤μ •)
} greetService;
```

---

### **2. Goμ μƒμ„±μ ν•¨μ(Cμ—μ„ κµ¬μ΅°μ²΄ ν¬μΈν„° μ΄κΈ°ν™”)**

Goμ μƒμ„±μ ν•¨μλ” κµ¬μ΅°μ²΄λ¥Ό μ΄κΈ°ν™”ν•κ³  ν¬μΈν„°λ¥Ό λ°ν™ν•©λ‹λ‹¤.

Go μ½”λ“:

```go
func NewGreetService(ctx context.Context) *greetService {
    return &greetService{ctx: ctx, name: ""}
}
```

C μ½”λ“:

```c
#include <stdlib.h>

// greetService κµ¬μ΅°μ²΄ μ΄κΈ°ν™” ν•¨μ(C λ²„μ „ μƒμ„±μ)
greetService* NewGreetService(void* ctx) {
    // λ©”λ¨λ¦¬ ν• λ‹Ή λ° μ΄κΈ°ν™”
    greetService* service = (greetService*)malloc(sizeof(greetService));
    service->ctx = ctx;           // ctx κ°’ μ„¤μ •
    strcpy(service->name, "");    // name μ΄κΈ°ν™”
    return service;               // κµ¬μ΅°μ²΄ ν¬μΈν„° λ°ν™
}
```

Cμ—μ„λ” `malloc`μ„ μ‚¬μ©ν•μ—¬ κµ¬μ΅°μ²΄μ λ©”λ¨λ¦¬λ¥Ό λ™μ μΌλ΅ ν• λ‹Ήν•κ³  λ°ν™ν•©λ‹λ‹¤. Goμ κ²½μ°μ—λ” λ©”λ¨λ¦¬ κ΄€λ¦¬κ°€ μλ™μΌλ΅ μ΄λ£¨μ–΄μ§€μ§€λ§, Cμ—μ„λ” μλ™μ μΌλ΅ λ©”λ¨λ¦¬λ¥Ό ν• λ‹Ήν•κ³  ν•΄μ ν•΄μ•Ό ν•©λ‹λ‹¤.

---

### **3. Goμ ν¬μΈν„° λ¦¬μ‹λ²„(Cμ—μ„ κµ¬μ΅°μ²΄ ν¬μΈν„°λ΅ λ©”μ„λ“ νΈμ¶)**

Goμ κµ¬μ΅°μ²΄ λ©”μ„λ“λ” ν¬μΈν„° λ¦¬μ‹λ²„λ¥Ό ν†µν•΄ κµ¬μ΅°μ²΄ λ°μ΄ν„°λ¥Ό μμ •ν•κ±°λ‚ μ ‘κ·Όν•©λ‹λ‹¤.

Go μ½”λ“:

```go
func (s *greetService) Greet(name string) string {
    s.name = name
    return fmt.Sprintf("Hello %s, It's show time!", s.name)
}
```

C μ½”λ“:

```c
#include <stdio.h>
#include <string.h>

// greetServiceμ— λ€ν• λ©”μ„λ“ λ™μ‘
char* Greet(greetService* service, const char* name) {
    // κµ¬μ΅°μ²΄ ν•„λ“ λ³€κ²½
    strcpy(service->name, name);
    
 // κ²°κ³Ό λ¬Έμμ—΄ μƒμ„±
    static char buffer[100];
    snprintf(buffer, sizeof(buffer), "Hello %s, It's show time!", service->name);
    return buffer;  // μƒμ„±λ λ¬Έμμ—΄ λ°ν™
}
```

μ—¬κΈ°μ„, `Greet` ν•¨μλ” κµ¬μ΅°μ²΄ ν¬μΈν„° `service`λ¥Ό λ°›μ•„ κµ¬μ΅°μ²΄ λ°μ΄ν„°λ¥Ό μμ •ν•©λ‹λ‹¤. μ΄λ” Goμ ν¬μΈν„° λ¦¬μ‹λ²„ μ—­ν• μ„ κ·Έλ€λ΅ λ°μν• κ²ƒμ…λ‹λ‹¤.

---

### **4. C μ–Έμ–΄μ™€ Goμ λ³€μ μ‚¬μ© λΉ„κµ**

#### **Go μ½”λ“**
```go
app := NewGreetService(ctx)
result := app.Greet("John")
fmt.Println(result)
```

#### **C μ½”λ“**
```c
void* ctx = NULL;  // contextλ” Goμ²λΌ λ³µμ΅ν• νƒ€μ… λ€μ‹  null ν¬μΈν„°λ΅ μ²λ¦¬
greetService* service = NewGreetService(ctx);

char* result = Greet(service, "John");
printf("%s\n", result);
```

C μ½”λ“μ—μ„λ” ν¬μΈν„° λ³€μ `service`λ¥Ό ν†µν•΄ κµ¬μ΅°μ²΄ λ°μ΄ν„°λ¥Ό κ΄€λ¦¬ν•λ©°, Goμ—μ„μ ν¬μΈν„° λ¦¬μ‹λ²„μ™€ κ°™μ€ λ°©μ‹μΌλ΅ κµ¬μ΅°μ²΄ ν•„λ“μ— μ ‘κ·Όν•©λ‹λ‹¤.

---

### **5. μ£Όμ” λΉ„κµ**

| **Go**                           | **C**                          |
|--------------------------------|--------------------------------|
 `type greetService struct {...}`  | `typedef struct {...}`          |
| `&greetService{}`                 | `malloc`μ„ ν†µν• λ™μ  λ©”λ¨λ¦¬ μƒμ„± |
| `NewGreetService()`               | ν•¨μλ΅ κµ¬μ΅°μ²΄ μ΄κΈ°ν™” ν›„ ν¬μΈν„° λ°ν™ |
| `(s *greetService) Method`        | κµ¬μ΅°μ²΄ ν¬μΈν„°λ¥Ό μ‚¬μ©ν• ν•¨μ νΈμ¶ |
| κµ¬μ΅°μ²΄ ν•„λ“ λ³€κ²½ μ‹ μλ™ κ΄€λ¦¬     | λ…μ‹μ μΌλ΅ λ©”λ¨λ¦¬ μ ‘κ·Ό λ° μμ • |

---

### **6. λ©”λ¨λ¦¬ κ΄€λ¦¬μ μ°¨μ΄**

Goμ™€ C κ°„μ ν° μ°¨μ΄μ μ€ λ©”λ¨λ¦¬ κ΄€λ¦¬ λ°©μ‹μ…λ‹λ‹¤:
1. **Go**
   - λ©”λ¨λ¦¬λ¥Ό μλ™μΌλ΅ κ΄€λ¦¬ν•©λ‹λ‹¤ (Garbage Collector).
   - κµ¬μ΅°μ²΄ ν•„λ“ λ³€κ²½μ€ ν¬μΈν„° λ¦¬μ‹λ²„λ¥Ό ν†µν•΄ κ΄€λ¦¬λλ©°, νΉλ³„ν λ©”λ¨λ¦¬λ¥Ό ν•΄μ ν•μ§€ μ•μ•„λ„ λ©λ‹λ‹¤.

2. **C**
   - λ©”λ¨λ¦¬λ¥Ό ν• λ‹Ή(`malloc`)ν•κ³ , ν•„μ”ν•μ§€ μ•μ„ λ• λ…μ‹μ μΌλ΅ ν•΄μ (`free`)ν•΄μ•Ό ν•©λ‹λ‹¤.
   - κµ¬μ΅°μ²΄ ν•„λ“ λ³€κ²½μ€ μ§μ ‘ λ©”λ¨λ¦¬ μ ‘κ·Ό(ν¬μΈν„° μ‚¬μ©)μ„ ν†µν•΄ μ΄λ£¨μ–΄μ§‘λ‹λ‹¤.

C μ½”λ“μ—μ„ `NewGreetService`μ™€ `Greet`μ„ μ‚¬μ©ν•  λ•λ” λ©”λ¨λ¦¬ λ„μλ¥Ό λ°©μ§€ν•κΈ° μ„ν•΄ μ„λΉ„μ¤ λ©”λ¨λ¦¬λ¥Ό ν•΄μ ν•΄μ•Ό ν•©λ‹λ‹¤.

μ:
```c
free(service);
```

---

### **7. λ¦¬μ‹λ²„ κ΄€μ μ C μ½”λ“ μ¬κµ¬μ„±**

Go λ¦¬μ‹λ²„ λ©”μ„λ“λ¥Ό μ™„μ „ν• C μ½”λ“λ΅ λ³€ν™ν•λ©΄ μ•„λμ™€ κ°™μ΄ κµ¬ν„λ©λ‹λ‹¤:

```c
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

// κµ¬μ΅°μ²΄ μ •μ
typedef struct {
    void* ctx;
    char name[50];
} greetService;

// κµ¬μ΅°μ²΄ μ΄κΈ°ν™” ν•¨μ
greetService* NewGreetService(void* ctx) {
    greetService* service = (greetService*)malloc(sizeof(greetService));
    service->ctx = ctx;
    strcpy(service->name, "");
    return service;
}

// κµ¬μ΅°μ²΄ ν¬μΈν„° λ¦¬μ‹λ²„μ™€ μ μ‚¬ν• ν•¨μ λ™μ‘
char* Greet(greetService* service, const char* name) {
    strcpy(service->name, name);
    static char buffer[100];
    snprintf(buffer, sizeof(buffer), "Hello %s, It's show time!", service->name);
    return buffer;
}

int main() {
    void* ctx = NULL; // context κ°’
    greetService* service = NewGreetService(ctx);

    char* result = Greet(service, "John");
    printf("%s\n", result);

    free(service); // λ©”λ¨λ¦¬ ν•΄μ 
    return0;
}
```

---

### **8. κ²°λ΅ **

`(s *greetService)`λ” C μ–Έμ–΄ κ΄€μ μ—μ„ λ³΄λ©΄ κµ¬μ΅°μ²΄ ν¬μΈν„°λ¥Ό λ¦¬μ‹λ²„λ΅ μ‚¬μ©ν•λ” κ²ƒκ³Ό κ°™μΌλ©°, Goμ—μ„μ κ°μ²΄μ§€ν–¥μ μΈ λ°©μ‹μ— ν•΄λ‹Ήν•©λ‹λ‹¤. κµ¬μ΅°μ²΄μ ν¬μΈν„°λ¥Ό μ‚¬μ©ν•λ©΄ **λ©”λ¨λ¦¬ ν¨μ¨μ **μ΄λ©°, κµ¬μ΅°μ²΄ ν•„λ“μ— μ§μ ‘ μ ‘κ·Όν•κ±°λ‚ μμ •ν•  μ μλ‹¤λ” μ μ—μ„ Cμ λ™μ‘κ³Ό λ§¤μ° μ μ‚¬ν•©λ‹λ‹¤. 

β” **ν• μ¤„ μ”μ•½**:  
`s *greetService`λ” κµ¬μ΅°μ²΄ μΈμ¤ν„΄μ¤μ— λ€ν• ν¬μΈν„°λ¥Ό λ¦¬μ‹λ²„λ΅ λ°›μ•„ μ‘μ—…ν•λ” λ°©μ‹μ΄λ©°, μ΄λ” Cμ κµ¬μ΅°μ²΄ ν¬μΈν„°λ¥Ό μ‚¬μ©ν• ν•¨μ νΈμ¶κ³Ό λ™μΌν•©λ‹λ‹¤. π‰

---

