+++
title = 'Boot.dev'
date = 2024-12-28T00:20:22+09:00
draft = true
+++
# String
- í¬ì¸í„°ì™€ \0 null characterê°€ ì¤‘ìš”.
ì‹œì‘ê³¼ ëë§Œ ì•Œê³  ë‚˜ë¨¸ì§€ëŠ” ëª¨ë¦„
- ì‚¬ì´ì¦ˆ ì •ë³´ë¥¼ ì €ì¥í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ë²„í¼ ì˜¤ë²„í”Œë¡œìš°ë¥¼ ì¡°ì‹¬í•´ì•¼. 
- strlenì€ ë§ˆì§€ë§‰ \0 ì§ì „ê¹Œì§€ lengthë¥¼ ì„¼ë‹¤.
- char buffer[64] ë¼ê³  í–ˆì„ ë•Œ, 63ê°œê¹Œì§€ë§Œ ë„£ì„ ìˆ˜ ìˆë‹¤. 

# Union Type
### íŒŒì´ì¬ì˜ ë™ì  ë³€ìˆ˜. 
- ëŸ°íƒ€ì„ì— íƒ€ì… ë³€ê²½ ë˜ê³  x = 10 í›„ x = 'hello' 
- ëª¨ë“  ê²ƒì´ ê°ì²´ì¸ ì–¸ì–´.
    - íŒŒì´ì¬ê³¼ JavaScriptì—ì„œëŠ” ë¬¸ìì—´ì´ ê°ì²´ì´ê¸° ë•Œë¬¸ì— ë©”ì„œë“œë¥¼ ê°€ì§ˆ ìˆ˜ ìˆìœ¼ë‚˜
CëŠ” ë‹¨ìˆœíˆ ë©”ëª¨ë¦¬ì— ìˆëŠ” char ë°°ì—´ì´ë¼ ë¬¸ìì—´ ì¡°ì‘í•˜ë ¤ë©´ ë³„ë„ í•¨ìˆ˜ë“¤ì„ ì‚¬ìš©í•´ì•¼ í•¨. 

union: ëª¨ë“  í•„ë“œê°€ ê°™ì€ ë©”ëª¨ë¦¬ë¥¼ ì”€. ë§ˆì§€ë§‰ìœ¼ë¡œ ì„¤ì •í•œ í•„ë“œ íƒ€ì…ìœ¼ë¡œë§Œ ì ‘ê·¼í•´ì•¼.
- intë¥¼ floatë‚˜ storeë¡œ ì½ìœ¼ë ¤í•˜ë©´ ì´ìƒí•œ ê°’ì´ ë¨.

signed vs unsigned int
- signed: ìµœìƒìœ„ ë¹„íŠ¸ëŠ” ë¶€í˜¸ë¹„íŠ¸, unsignedì—ì„œëŠ” ëª¨ë“  ë¹„íŠ¸ë¥¼ ê°’ì„ í•´ì„
- ìµœìƒìœ„ê°€ 1ì¸ ìŒìˆ˜ë¥¼ ì½ì„ ë•ŒëŠ”, ë‚˜ë¨¸ì§€ 31ë¹„íŠ¸ë¥¼ ë°˜ì „ì‹œí‚¨ í›„ 1ì„ ë”í•˜ê³  ì•ì— -ë¥¼ ë¶™ì„.
ì´ ë°©ì‹ì€ CPUê°€ ìŒìˆ˜ì™€ ì–‘ìˆ˜ë¥¼ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤. 

unsigned: 32ë¹„íŠ¸ë¥¼ ì „ë¶€ ê°’ìœ¼ë¡œ ì½ìœ¼ë©´ 1ì´ 32ê°œ, 42ì–µ9ì²œ..
signed: ìµœìƒìœ„ 1ì´ ë¶€í˜¸, ë‚˜ë¨¸ì§€ 0ìœ¼ë¡œ ë°˜ì „, + 1 = -1.


int raw[8] ì™€ uint8_t raw[8]ì€ ë‹¤ë¦„
ì•ì€ 4*8 * 8, ë’¤ëŠ” 8 * 8 ?

# Stack
ìŠ¤íƒì€ ë¡œì»¬ ë³€ìˆ˜ê°€ ì €ì¥ë˜ëŠ” ê³³. í•¨ìˆ˜ê°€ í˜¸ì¶œë  ë•Œë§ˆë‹¤ ìƒˆë¡œìš´ ìŠ¤íƒí”„ë ˆì„(í•¨ìˆ˜ params, local ë³€ìˆ˜ë“¤ì„ ë‹´ì€)ì´ ìƒê²¨ë‚œë‹¤.
í•¨ìˆ˜ê°€ ëë‚˜ì§€ ì•Šê³  ê³„ì† ìŠ¤íƒí”„ë ˆì„ì´ ìƒì„±ë˜ëŠ” ìƒí™©
-> stack pointerê°€ ê³„ì† ì¦ê°€í•¨. 

void printStackPointerDiff() {
  static void *last_sp = NULL;
  void *current_sp;
  current_sp = __builtin_frame_address(0);
  long diff = (char*)last_sp - (char*)current_sp;
  if (last_sp == NULL){
    last_sp = current_sp;
    diff = 0;
  }

last_spëŠ” ì²« ìŠ¤íƒí”„ë ˆì„ ì£¼ì†Œë¡œ ê³ ì •, curr_spë§Œ ê³„ì† ë‚®ì€ ì£¼ì†Œë¡œ ì´ë™í•¨.
-> í•¨ìˆ˜ ë‚´ë¶€ì— ì„ ì–¸ëœ static ë³€ìˆ˜: 
í•¨ìˆ˜ê°€ ì—¬ëŸ¬ ë²ˆ í˜¸ì¶œë˜ë”ë¼ë„ í•´ë‹¹ ë³€ìˆ˜ëŠ” í•œ ë²ˆë§Œ ì´ˆê¸°í™”ë˜ë©°, í•¨ìˆ˜ í˜¸ì¶œ ê°„ì— ê°’ì„ ìœ ì§€

* ìŠ¤íƒì— ì €ì¥ë˜ëŠ” ê²ƒ.
return address - ë°˜í™˜ë˜ë©´ ì–´ë””ë¡œê°ˆì§€
stack pointer
argument - ë©”ëª¨ë¦¬ ë³µì‚¬ê°€ ì¼ì–´ë‚¨

* ìŠ¤íƒì˜ ì¥ì 
ë©”ëª¨ë¦¬ê°€ ì—°ì†ì ìœ¼ë¡œ ë°°ì¹˜ë¨ (í™ì€ ê·¸ë ‡ì§€ ì•ŠìŒ)
í•¨ìˆ˜ê°€ ë°˜í™˜ë˜ë©´ ì—†ì–´ì§€ê¸°ì— ìë™ìœ¼ë¡œ ë©”ëª¨ë¦¬ ê´€ë¦¬ê°€ ë¨.
thread safety. ê° ìŠ¤ë ˆë“œëŠ” ìì‹ ì˜ ìŠ¤íƒì„ ê°€ì§€ë¯€ë¡œ í™ ì²˜ëŸ¼ ë™ê¸°í™” ë©”ì»¤ë‹ˆì¦˜ì´ í•„ìš”ì—†ìŒ.
-> GoëŠ” ì™ ë§Œí•˜ë©´ ìŠ¤íƒì— ë³€ìˆ˜ë¥¼ ì €ì¥í•˜ì§€ë§Œ íŒŒì´ì¬ì€ ëŒ€ë¶€ë¶„ì˜ ê°ì²´ë¥¼ í™ì— ì €ì¥í•œë‹¤
(íŒŒì´ì¬ì€ ëª¨ë“ ê²ƒì´ ê°ì²´, ê°ì²´ëŠ” í™ì— ì €ì¥ë˜ì–´ì•¼ ë©”ëª¨ë¦¬ ê´€ë¦¬ê°€ ìš©ì´
íŒŒì´ì¬ì˜ í•¨ìˆ˜ í˜¸ì¶œ ìŠ¤íƒì€ ìŠ¤íƒ í”„ë ˆì„ì„ ì‚¬ìš©í•˜ì§€ë§Œ, ì‹¤ì œ ë°ì´í„°ëŠ” í™ì— ì €ì¥ëœ ê°ì²´ë¥¼ ì°¸ì¡°)

í•¨ìˆ˜ ë°˜í™˜ê°’ì€ &c ê°™ì€ ì°¸ì¡°ê°€ ë˜ë©´ ì•ˆë¨.
ì´ë¯¸ ìŠ¤íƒí”„ë ˆì„ì´ ì‚¬ë¼ì§„ í›„ ì•ˆì—ìˆë˜ ë³€ìˆ˜ë¥¼ ì°¸ì¡°í•˜ê²Œ ë˜ë¯€ë¡œ ì‚¬ì‹¤ìƒ undefinedì¸ë° ê°€ì¥ ìµœê·¼ í•¨ìˆ˜ì˜ ë³€ìˆ˜ë¡œ ë®ì–´ì“°ê¸° ë˜ëŠ”ë“¯.
ì¼ë°˜ êµ¬ì¡°ì²´ cë¥¼ ë°˜í™˜í•˜ë©´ ë©”ì¸í•¨ìˆ˜ë¡œ ë³µì‚¬ê°€ ì¼ì–´ë‚˜ì„œ memory safe ì ‘ê·¼ ê°€ëŠ¥í•¨.

cëŠ” name, address, value ê°€ ì „ë¶€ë‹¤.


* ìŠ¤íƒ ë©”ëª¨ë¦¬ì— í• ë‹¹ëœ ë³€ìˆ˜ë¥¼ ê°€ë¦¬í‚¤ëŠ” í¬ì¸í„°ë¥¼ ë°˜í™˜í•˜ëŠ” ê²ƒì€ ìœ„í—˜
í•¨ìˆ˜ê°€ ì¢…ë£Œë˜ë©´ ì´ í•¨ìˆ˜ê°€ ë°˜í™˜í•˜ëŠ” í¬ì¸í„°ëŠ” ë” ì´ìƒ ìœ íš¨í•˜ì§€ ì•ŠìŒ.
-> í•¨ìˆ˜ ì¢…ë£Œí›„ì—ë„ ì¨ì•¼í•˜ë©´ 'í™'ì— í• ë‹¹!
char *get_full_greeting(char *greeting, char *name, int size) {
  char full_greeting[100];
  snprintf(full_greeting, 100, "%s %s", greeting, name);
  return full_greeting;  // ìœ„í—˜! ìŠ¤íƒ ë©”ëª¨ë¦¬ì˜ ì£¼ì†Œë¥¼ ë°˜í™˜
}


# í™
ë™ì  ë©”ëª¨ë¦¬. as neededì— ë”°ë¼ í• ë‹¹/í•´ì œ.
ì§ì ‘ í•´ì œí•´ì¤˜ì•¼ í•˜ëŠ”ê²½ìš° ê¹Œë¨¹ì„ ìœ„í—˜.

ì»´íŒŒì¼ íƒ€ì„ì— ì‚¬ì´ì¦ˆë¥¼ ì•Œ ìˆ˜ ì—†ëŠ” ê²½ìš° í™ì— í• ë‹¹. (ëŸ°íƒ€ì„ì—ì„œì•¼ ì •í™•í•œ í¬ê¸° ì•Œ ìˆ˜)

mallocìœ¼ë¡œ í• ë‹¹í•˜ë©´ ê·¸ ì£¼ì†ŒëŠ” ìŠ¤íƒì— ì €ì¥ë˜ë‚˜ ì‹¤ì œ ë°ì´í„°ëŠ” í™ì— ìˆë‹¤. ê·¸ê±¸ ê°€ë¦¬í‚¤ëŠ” ì£¼ì†Œì¼ë¿.

freeë¥¼ í•´ë„ í¬ì¸í„°ëŠ” ë‚¨ì•„ìˆê³ , í•´ì œëœ ë©”ëª¨ë¦¬ë¥¼ ê°€ë¦¬í‚¨ë‹¤.
- ì¦‰ ë©”ëª¨ë¦¬ì— ì €ì¥ëœ ê°’ì€ ë³€í•˜ì§€ ì•Šìœ¼ë©°, ë‹¨ì§€ OSì— ê·¸ ê³µê°„ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤ëŠ”ê²ƒë§Œ ì•Œë ¤ì¤€ë‹¤.

# í¬ì¸í„°
## ì´ì¤‘í¬ì¸í„° pointer-pointers
ì–´ë–¤ ê°’ì„ ê°€ë¦¬í‚¤ë˜ í¬ì¸í„°ë¥¼ ë‹¤ë¥¸ ê°’ì„ ê°€ë¦¬í‚¤ê²Œ í•  ìˆ˜ ìˆìŒ.

í•¨ìˆ˜ ì¸ìë¡œ &ì°¸ì¡°ë¥¼ ë„˜ê²¼ì„ë•Œ, ê·¸ ì°¸ì¡° arrayë¥¼ deep copyí•˜ë ¤ë©´ ì´ì¤‘í¬ì¸í„° ë°°ì—´ì„ ìƒì„±í•´ì„œ(malloc) ê·¸ ì•ˆì— ê° ì›ì†Œë¥¼ mallocìœ¼ë¡œ í• ë‹¹í•´ ë„£ì–´ì¤€ë‹¤.
JSì™€ ë¹„êµí•´ë³´ë©´ 
JSì˜ ê²½ìš° ìŠ¤í”„ë ˆë“œ ì—°ì‚°ì(...)ëŠ” shallow copyì„. ìµœìƒìœ„ ì†ì„±ë§Œ ë³µì‚¬í•˜ê³  ì¤‘ì²©ëœ ê°ì²´ë‚˜ ë°°ì—´ì€ ì—¬ì „íˆ ì›ë˜ ê°ì²´ë¥¼ ì°¸ì¡°.
JSON.stringify(obj)ë¥¼ í•´ì•¼ deep copy


## swap param
Cì˜ í•¨ìˆ˜ í˜¸ì¶œ ë°©ì‹(call by value) 
í•¨ìˆ˜ì— ì „ë‹¬ë˜ëŠ” í¬ì¸í„°ë„ 'ê°’ìœ¼ë¡œ ì „ë‹¬'. ì¦‰, í¬ì¸í„°ì˜ ë³µì‚¬ë³¸ì´ ì „ë‹¬.
a = b; b = ptr; ì´ëŸ°ì‹ìœ¼ë¡œ í¬ì¸í„°ê°’ë§Œ ìŠ¤ì™‘í•˜ëŠ”ê±´ ì˜ë¯¸ì—†ìŒ

void swap_ints(int *a, int *b) {
    int temp = *a;    // í¬ì¸í„°ê°€ ê°€ë¦¬í‚¤ëŠ” ì‹¤ì œ ê°’ì„ ì¡°ì‘
    *a = *b;
    *b = temp;
}

int a = 5;
int b = 6;
swap_ints(&a, &b);
-> Call by Reference: ì´ í•¨ìˆ˜ ì•ˆì—ì„œ a, bì˜ ê°’ì„ ë°”ê¾¸ëŠ”ê±°ì„. í¬ì¸í„° ì¸ìëŠ” ì½œìŠ¤íƒ ë¹ ì ¸ë‚˜ì˜¤ë©´ ì—†ì–´ì§€ê³ .

### generic(void) pointer swapì˜ ê²½ìš°
*ptr1 = *ptr2 ë§Œìœ¼ë¡œëŠ” ì•ˆë¨ (stringì€ **ë¼ì„œ ê·¸ëŸ°ê°€)
memcpy(dest, src, size)ë¡œ í•´ì•¼í•¨.
-> sizeëŠ” ê°œìˆ˜ * ê° sizeof

---
# ìŠ¤íƒ ìë£Œêµ¬ì¡°
ì œë„ˆë¦­(void *)ì— ëŒ€í•´ ë” ê¹Šì´ ì•Œì•„ë³´ì.

anyê°€ void*ì„.
```c
// any type == void *, any array is what?
// 1 element is void* type
void **ptr = malloc(capacity * sizeof(void*));
```
-> char ë°°ì—´ (char **str)ê³¼ ë¹„ìŠ·. 

stack->data = any[];


* ì•„ë¬´ê±°ë‚˜ stack->dataì— ë“¤ì–´ê°€ëŠ” ìƒí™©
we can push both int and int * types into the same stack (again, a bad idea).
```c
void scary_double_push(stack_t *s) {
  // ì›ì¹˜ì•Šì€ push. 1337ì´ë¼ëŠ” ìˆ«ì ìì²´ê°€ í¬ì¸í„°ë¡œ ìºìŠ¤íŒ…ë˜ì–´ pushë¨.
  // void*ê°€ anyì§€ë§Œ ê·¸ë³´ë‹¤ëŠ” int*, char*ì´ ë‚˜ìŒ.
  stack_push(s, (void*)1337);
  // ì˜ë„ëœ ê²ƒ. 1024ë¼ëŠ” ê°’ì„ ê°€ë¦¬í‚¤ëŠ” ì£¼ì†Œê°€ pushë¨.
  int *ptr = (int*)malloc(sizeof(int));
  *ptr = 1024;
  stack_push(s, ptr);
}
```

---
```c
void stack_push_multiple_types(stack_t *s) {
  float *float_ptr = (float*)malloc(sizeof(float));
  *float_ptr = 3.14;

  stack_push(s, float_ptr);

  //ğŸ”´ string íƒ€ì…ì´ ë­ì§€? char* 
  
  char *src = "Sneklang is blazingly slow!";
  char *char_ptr = (char*)malloc(sizeof(char) * (strlen(src) + 1));
  strcpy(char_ptr, src); //ğŸ”´ ë©”ëª¨ë¦¬ì— ë„£ëŠ”ê±°ë¼
  stack_push(s, char_ptr);
}

* memcpyë¥¼ ì“°ëŠ” ìƒí™©
- struct ë³µì‚¬ì‹œ (ì›ì‹œíƒ€ì…ë§Œ *ptr = ë‹¨ìˆœëŒ€ì…ìœ¼ë¡œ ê°€ëŠ¥)
- void*ë¡œ ì‘ì—…ì‹œ í¬ê¸° ì •ë³´ê°€ ì—†ì–´ì„œ ì§ì ‘ ëŒ€ì… ì•ˆë¨.

# Object
.hì— ì„ ì–¸ëœ ê°ì²´ ì´ˆê¸°í™”ì‹œ
malloc ìœ¼ë¡œ í• ë‹¹ í›„ ê·¸ í¬ì¸í„°ë¥¼ ë°˜í™˜í•˜ê¸°ì—
ì£¼ë¡œ `obj->field = ì´ˆê¸°í™”ê°’` ìœ¼ë¡œ í•˜ê²Œ ë¨. 
snek_object_t *new_obj = malloc(sizeof(snek_object_t));


typedef union SnekObjectData {
  int v_int;
  float v_float;
  char *v_string;
  snek_vector_t v_vector3; -> í¬ì¸í„°ê°€ ì•„ë‹ˆë¼ êµ¬ì¡°ì²´! ğŸ”´
} snek_object_data_t;

ğŸ”´mallocì´ ì•„ë‹ˆë¼ êµ¬ì¡°ì²´ë¥¼ ìƒì„±í•´ì„œ ì§ì ‘ ëŒ€ì….
  snek_vector_t vector = {
    .x = x,
    .y = y,
    .z = z,
  };
  obj->data.v_vector3 = vector;


* ë¦¬í„´í• ê±°ë©´ ìŠ¤íƒ ë³€ìˆ˜ì—¬ë„ ë˜ê³ ,
ë‹¤ë§Œ ê·¸ ì•ˆì— ì°¸ì¡°ë˜ëŠ” ê°’ì´ ìˆë‹¤ë©´ mallocì´ì–´ì•¼ í•¨.
  snek_array_t array = {
    .size = size,
    .elements = arr_ptr // ì°¸ì¡°ì´ë‚˜ malloc
  };

  obj->data.v_array = array; // ì°¸ì¡° ì•„ë‹˜
  return obj;

* strcatì€ dest ë¬¸ìì—´ì´ ì´ˆê¸°í™”ëœ ìƒíƒœë¥¼ ê°€ì •.
-> strcat ì „ strcpy ë˜ëŠ” memcpy
- mallocì€ ê°€ë¹„ì§€ ê°’ë“¤ì´ ë“¤ì–´ìˆì–´ì„œ stringìœ¼ë¡œ íŒë‹¨í•´ë²„ë¦¼.. ê·¸ë˜ì„œ \0 null terminator ë‹¤ìŒì— ë„£ì–´ì•¼í•˜ëŠ”ë° ì°¾ì„ ìˆ˜ ì—†ê²Œë¨
- callocì€ 0ìœ¼ë¡œ ëª¨ë“  ë¹„íŠ¸ë¥¼ ì´ˆê¸°í™” -> 0 ë¹„íŠ¸ê°€ \0 ì„. 

char *temp_str = calloc(new_length, sizeof(char));
strcat(temp_str, a->data.v_string);
strcat(temp_str, b->data.v_string);
```