+++
title = '디버깅'
date = 2025-01-01T00:20:22+09:00
draft = true
+++
# launch.json, tasks.json

### 🔴🔴🔴 중요!
launch.json은 어떤 프로그램을 어떻게 실행시킬 것인지,
그 전에 preLaunchTask로 tasks.json의 어떤 task를 실행할 지 명시한다.
task는 주로 빌드를 실행하게 되고, 그다음 launch.json에서 명시한 프로그램이 실행되는 것.
🔴🔴🔴
참고로 테스트 케이스에는 args가 있는 경우, 없는 경우가 있는데
후자는 로직상 infile = stdin 으로 들어가도록 처리하게 되어있고
이 경우를 위해 launch.json config 배열에는 두 케이스가 들어가있는듯.


launch.json과 tasks.json의 상호작용은 주로 `preLaunchTask`를 통해 이루어집니다. 

현재 설정을 보면:

**launch.json:**
```json
{
    "configurations": [
        {
            "name": "Debug Word Count (File)",
            "preLaunchTask": "build",  // tasks.json의 "build" task 참조
			// 어떤 프로그램을 어떤 인자로 실행할 지
			"program": "${workspaceFolder}/hw-intro/words/words",
            "args": [
                "words.txt",
                "words.txt",
                "-c"
            ],
            ...
        },
        {
            "name": "Debug Word Count (stdin)",
            "preLaunchTask": "build",  // tasks.json의 "build" task 참조
			"args": [],
            ...
        }
    ]
}
```

**tasks.json:**
```json
{
    "tasks": [
        {
            "label": "build",  // launch.json의 preLaunchTask가 참조하는 task
            "type": "shell",
            "command": "make",  // makefile로 빌드 실행 (executable program 생성)
            ...
        }
    ]
}
```

**상호작용 과정:**
1. VS Code에서 디버그 실행(F5)
2. launch.json의 `preLaunchTask: "build"` 확인
3. tasks.json에서 `"label": "build"`인 task 찾아서 실행
4. make 명령어 실행 (프로그램 빌드)
5. 빌드 성공하면 launch.json의 디버깅 설정으로 프로그램 실행

즉, **디버깅 시작 전에 자동으로 빌드**가 실행되도록 두 파일이 연계되어 있습니다.

---
#### Mac configuration
tasks.json의 "C/C++: clang build active file" task를 찾아서 실행.
command + args : 디버깅 모드로 exe


```json
// launch.json
    {
      "name": "C/C++: clang build and debug active file",
      "type": "cppdbg",
      "request": "launch",
      "program": "${fileDirname}/${fileBasenameNoExtension}",
      "args": [],
      "stopAtEntry": false,
      "cwd": "${fileDirname}",
      "environment": [],
      "externalConsole": true,
      "MIMode": "lldb",
      "preLaunchTask": "C/C++: clang build active file"
    }
```

```json
// tasks.json
{
  "tasks": [
    {
      "type": "cppbuild",
      "label": "C/C++: clang build active file",
      "command": "/usr/bin/clang",
      "args": [
        "-fcolor-diagnostics",
        "-fansi-escape-codes",
        "-g",
        "${file}",
        "-o",
        "${fileDirname}/${fileBasenameNoExtension}"
      ],
      "options": {
        "cwd": "${fileDirname}"
      },
      "problemMatcher": [
        "$gcc"
      ],
      "group": {
        "kind": "build",
        "isDefault": true
      },
      "detail": "Task generated by Debugger."
    },
	]
}
```