+++
title = '스터디 6회차'
date = 2024-05-07T00:20:22+09:00
draft = true
+++
## 로드밸런싱 / 라우팅 + DNS 핸즈온

### 🟦🟦🟦🟦 네트워크 주말까지 실습 🟦🟦🟦🟦
라우팅을 좀더 공부해보자

![image](https://github.com/user-attachments/assets/f384a6f9-2e66-43f5-9fa0-bf09d6f4e94d)


** 주말까지
20.41.105.230 쓰면 됨.
young/asdf0987!@#$

1.1.1.1, 1.1.1.2는 같은 네트워크고
static / dynamic 라우팅 -> 대부분 static 라우팅을 직접 넣어주는데

내가 알고있는 반대편에만 보내고,
반대편에서도 알고있는 쪽으로 던지고
💎 중요한건 반대편 경로에서도 잡아줘야 함

**목적지 네트워크IP 대역, 서브넷, Next hop 보내는 건 똑같음.**

Q. 1.1.1.1은 무슨 IP지? 서버가 속해있는 IP?


---
### 로드밸런싱
주기와 응답시간을 가지고 타임아웃을 결정함.
aws에서는 주기가 기본 30초, retry는 3번.
그다음 주기까지 30초는 길다?
1분 30초동안 죽은 서버로 계속 요청이 가게되므로.
-> 온프렘에서는 타임아웃을 10초로 뒀음.
interver 3초.

타임아웃은 L4에서 실제 바인딩이 끊어지는 순간 -> 이제 다른 서버로 가게됨.
타임아웃 = 주기 * 2 + 응답시간. 12초. 
💎 timeout = 5(interval) * 2(retries-1) + 2(response)

---
Q. 여러 서버가 각각 세션이 있을때 한쪽에서 죽으면 로그아웃 & 세션 없어지는건가?
보통 라운드로빈인데 
세션값을 갖고있어야 하는 경우? Hash값을 쓰기도.
특정 유저를 특정 서버로 라우팅-

* 세션스토어?
세션 관리를 따로 서버두고 하면.
한 서버가 죽어도 
그 따로 하는데서. 

---
* DSR(direct server return)

출발지가 clientIP가 사용자로 보임
루프백을 갖고있어서 = 목적지도 자기 인터페이스 IP로 알고있으면
자기가 요청한 애에서 응답이 오려면 LB를 거쳐야하는데..
LB를 중간에 자동으로 거쳐가게 되어있음. 

Q. 루프백이 뭐지? 예시?



