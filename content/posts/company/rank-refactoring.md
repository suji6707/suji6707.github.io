+++
title = 'ë­í‚¹ì¶”ì  ë¦¬íŒ©í† ë§'
date = 2024-02-25T00:20:22+09:00
draft = true
+++
## ë­í‚¹ì¶”ì  ë¦¬íŒ©í† ë§
### ê·œì¹™
íŒŒì„œëŠ” ì–´ëŒ‘í„°ì— ë‘”ë‹¤. 
ì–´ëŒ‘í„°ì—ì„œ cheerio íŒŒì„œë¥¼ ì£¼ì…í•œë‹¤

ì‹¤ì œ ìŠ¤í¬ë˜í•‘ í•˜ëŠ” ë¶€ë¶„ì€ ë§¨ ë§ˆì§€ë§‰ì— ì‘ì„±.
íŒŒì‹±ê¹Œì§€ ë‹¤ ë˜ì–´ ì™”ë‹¤ëŠ” ê°€ì •í•˜ì— ë„ë©”ì¸ ì‘ì„±í•˜ê¸°.

1) ìƒí’ˆë“±ë¡
2) í‚¤ì›Œë“œë¥¼ ë“±ë¡í•œë‹¤
3) ë­í‚¹ì„ ì¶”ì í•œë‹¤
4) ê·¸ë£¹ì— ë„£ëŠ”ë‹¤

---
#### ë„ë©”ì¸ ê°ì²´ê°€ ë§Œë“¤ì–´ì§€ëŠ” íë¦„

---
### 1. ìœ ìŠ¤ì¼€ì´ìŠ¤ ì •ë¦¬


#### ë­í‚¹ì¶”ì  í™”ë©´.
1. ìƒí’ˆë“±ë¡ì„ í–ˆì„ ë•Œ
- ëˆ„ê°€ íŠ¸ë˜í‚¹í•˜ëŠ”ì§€ ì €ì¥í•œë‹¤ (user_trackings)
- ìƒí’ˆ ë©”íƒ€ë°ì´í„°ë¥¼ í¬ë¡¤ë§í•œë‹¤
    - ìŠ¤ë§ˆíŠ¸ìŠ¤í† ì–´ urlì˜ doc í˜ì´ì§€ì—ì„œ ì•„ë˜ ë‘ ê°€ì§€ë¥¼ íŒŒì‹±í•œë‹¤
        - ê¸°ë³¸ ì •ë³´(tracking_products: nvmid, mallpid ë“±)
        - ë””í…Œì¼ ì •ë³´(tracking_product_info: reviewAmount, delivery fee ë“±)
- íŒŒì‹±ëœ ì •ë³´ë¡œ ë„ë©”ì¸ì„ ìƒì„±í•œë‹¤
2. ì‚¬ìš©ìê°€ í‚¤ì›Œë“œë¥¼ ë“±ë¡í•˜ë©´
- ë„¤ì´ë²„ ì‡¼í•‘ê²€ìƒ‰ í˜ì´ì§€ì—ì„œ í•´ë‹¹ ìƒí’ˆì˜ ìˆœìœ„ë¥¼ ì°¾ì•„ ë°˜í™˜í•œë‹¤ 

âƒâƒâƒâƒâƒâƒâƒâƒâƒâƒâƒâƒâƒâƒâƒâƒâƒ
#### ì½”ë“œë ˆë²¨
ìœ ìŠ¤ì¼€ì´ìŠ¤ì™€ ê´€ë ¨ í•¨ìˆ˜ ì •ë¦¬ 
-> ë„ë©”ì¸ì„ ë¬¶ëŠ” ê²ƒì´ ëª©ì . ëŒ€ë‹¨í•œ ê²ƒ ì—†ë‹¤. ì°½ì˜ì„± ë°œíœ˜ X.

#### 1. ì¶”ì ìƒí’ˆì„ ë“±ë¡í•˜ëŠ” ì„œë¹„ìŠ¤
A. ì‚¬ìš©ìê°€ urlì„ ë“±ë¡í•˜ë©´ 
- ìœ íš¨í•œ urlì¸ì§€ í™•ì¸í•˜ê³  íŒŒë¼ë¯¸í„°ë¥¼ ì œê±° í›„ ë°˜í™˜í•œë‹¤
- í•´ë‹¹ urlë¡œ tracking_productê°€ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸
- ìˆìœ¼ë©´ ë°˜í™˜, ì—†ì„ë•Œë§Œ í¬ë¡¤ë§ì„ ì§„í–‰í•œë‹¤
    - ê°•ì œ ì—…ë°ì´íŠ¸ ì—¬ë¶€ ì²´í¬: force = trueë©´ ë®ì–´ì“°ê¸°, ê¸°ë³¸ falseë©´ ì•„ë˜ í”„ë¡œì„¸ìŠ¤ ì§„í–‰
- í¬ë¡¤ë§ í›„ íŒŒì‹±í•˜ì—¬ ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤. 
    - a. ê¸°ë³¸ ì •ë³´ -> finalURL(ë¦¬ë‹¤ì´ë ‰íŠ¸ ìµœì¢… ì—”ë“œí¬ì¸íŠ¸)ì„ í¬í•¨í•œ ìƒí’ˆ ì •ë³´ë“¤
    - b. ë””í…Œì¼ ì •ë³´ -> ğŸŠ íŒŒì‹±ë¡œì§ì€ getProductDetailInfoViaWeb ì°¸ì¡°
- íŒŒì‹±í•œ ì •ë³´ë¡œ í•´ì•¼ í•  ê²ƒ:
    - finalURLë¡œ tracking_productê°€ ì¡´ì¬í•˜ëŠ”ì§€ í•œë²ˆ ë” í™•ì¸
    - ì¡´ì¬í•˜ë©´ (ê¸°ì¡´ì—ëŠ” conversion mapì— ì¶”ê°€í–ˆëŠ”ë°) tracking_productì˜ urlì„ ì—…ë°ì´íŠ¸í•œë‹¤
    - ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´ ìƒˆë¡œ ë„ë©”ì¸ ê°ì²´ë¥¼ ìƒì„±í•˜ì—¬ DBì— ì €ì¥í•œë‹¤. DB í…Œì´ë¸”ì€:
        - a. tracking_products
        - b. tracking_product_info
 
 ---
#### 2. í‚¤ì›Œë“œ ë­í‚¹ì„ ì¶”ì í•˜ëŠ” ì„œë¹„ìŠ¤
í‚¤ì›Œë“œë¥¼ ë„¤ì´ë²„ ì‡¼í•‘ê²€ìƒ‰ í–ˆì„ë•Œ í•´ë‹¹ ìƒí’ˆ urlì´ ëª‡ë²ˆì§¸ì— ìˆëŠ”ì§€ ì²´í¬í•œë‹¤.
##### íë¦„
- âœ“ addable: í•´ë‹¹ ìœ ì €ê°€ í‚¤ì›Œë“œ ë“±ë¡ ê°€ëŠ¥í•œì§€ ì²´í¬í•œë‹¤ (ë©¤ë²„ì‹­)
- âœ“ ëˆ„ê°€ ì–´ë–¤ í‚¤ì›Œë“œë¥¼ ì¶”ì í•˜ëŠ”ì§€ ì €ì¥í•œë‹¤(keywords, user_tracking_keyword)
- ì‹¤ì‹œê°„ ë­í‚¹ ì¶”ì 
    - ë„¤ì´ë²„ ì‡¼í•‘ê²€ìƒ‰ APIë¥¼ í˜¸ì¶œí•´ì„œ í•´ë‹¹ í‚¤ì›Œë“œ ê²€ìƒ‰ê²°ê³¼ ìƒí’ˆë“¤ì˜ productIds ë°°ì—´ì„ ê°€ì ¸ì˜¨ë‹¤ -> ì•„ì›ƒí¬íŠ¸ & íŒŒì‹±(ì–´ëŒ‘í„°)
    - âœ“ ìœ ì €ì˜ ì¶”ì ìƒí’ˆì´ ëª‡ë²ˆì§¸ì¸ì§€ ìˆœìœ„ë¥¼ ë§¤ê²¨ì„œ ë°˜í™˜í•œë‹¤


Q. ì–´ë–¤ tpListì— ëŒ€í•´ ìˆ˜í–‰í•˜ëŠ”ê°€? (ì‹¤ì‹œê°„ì—ì„œ)
Q. 

##### ì„œë²„ íŒŒì¼
keyword_shopping_page.js
- crawlRankViaAPI:
    - 1. crawlTrackingProductsWithNvmid
        - ì¶©ë¶„íˆ ë„ë©”ì¸ ë¡œì§ìœ¼ë¡œ ë‚´ë ¤ì˜¬ ìˆ˜ ìˆìŒ.
        - ê·¸ ì—­í• ì€:
            - Q. `nvCatalogId` í•˜ë‚˜ë¥¼ ìœ„í•´ `getProductDetailInfo`- ìŠ¤ë§ˆíŠ¸ìŠ¤í† ì–´ í¬ë¡¤ë§ê¹Œì§€ í•œë‹¤.
            ë¬¶ìŒìƒí’ˆì€ - ì˜¤í”ˆAPIë“  í¬ë¡¤ë§ì´ë“  ë¬¶ìŒìƒí’ˆì— ì†í•˜ë©´ ê·¸ ìˆœìœ„ë¥¼ ì•Œê¸°ìœ„í•´ í•„ìˆ˜ë‹¤.
            ```
            result.push({
                id: tp.id,
                nvmid: tp.nvmid,
                url: tp.url,
                nvCatalogId: lastStat?.catalog_id,
            });
            ```
    - 2. requestAndCrawlShopPageViaAPI
    - 3. checkNvmids
        - keyword_shopping_detail_page.js ì°¸ì¡°.
        - checkNvmidsë§Œ ìš°ì„  êµ¬í˜„í•˜ë©´ ë¨
        - checkMallPids: ë°°ì¹˜ì— ì“°ì´ëŠ” crawlRankì—ì„œë§Œ ì”€.

ğŸ‹ í¬ë¡¤ë§ ë° íŒŒì‹±: 
- requestAndCrawlShopPage: ë¹„ê³µì‹ API -> Q. ì§€í™ë‹˜ì´ë‘ ë‚˜ë‘ ê°ê° êµ¬í˜„í•´ì•¼í•˜ë‚˜??
- requestAndCrawlShopPageViaAPI: ì˜¤í”ˆ API(ë„¤ì´ë²„ ê°œë°œìì„¼í„°)

ì¼ë‹¨ ì‹¤ì œ ìŠ¤í¬ë˜í•‘í•˜ëŠ” ë¶€ë¶„ì€ ì œì™¸í•˜ê³  ë³´ë¼ê³  í•˜ì…¨ë‹¤.
ê·¸ê±¸ ì œì™¸í•˜ë©´ ë¬´ìŠ¨ ë„ë©”ì¸ ë¡œì§ì„ ë³´ë¼ëŠ” ë§ì¸ê°€? íŒŒì‹±ë„ ë¹¼ë©´.




##### ì»¨íŠ¸ë¡¤ëŸ¬
ğŸ ì‹¤ì œ ë­í‚¹ ì¶”ì í•˜ëŠ” API
@api {post} /v2/tracking/keyword 
-> bodyì— tracking_id, keywords: [] ì¶”ì í‚¤ì›Œë“œ ë°°ì—´
https://local.itemscout.io:3001/api/v2/tracking/keyword

ğŸ ë­í‚¹ë°ì´í„° ì¡°íšŒ
1-1. ğŸ‘ ë­í‚¹: v2/tracking/product/166/keywords/ranks?
startDate=2024-04-16&endDate=2024-04-17&keywords=35207%2C35514
- rank, adRank, 
"rank": {
    "166": [
        {
            "rank": 101,
            "tie": 0,
            "tieRank": 0

1-2. v2/tracking/product/166/keywords/ranks?
startDate=2024-04-23&endDate=2024-04-23&keywords=389713
- "data":{"389713":[{"rank":101,"date":"2024-04-23"}]}}

2. ê·¸ë˜í”„: v2/tracking/product/graph/166?startDate=2024-04-16&endDate=2024-04-23&isExample=fal

3. ì¼ë°˜: v2/tracking/product/general/166?isExample=false
- ProductDetailInfo


4. /v2/tracking/keyword/stat/198
ê²€ìƒ‰ìˆ˜, ìƒí’ˆìˆ˜

5. v2/tracking/product/daily/198?startDate=2024-04-23&endDate=2024-04-23
- tags, price, cate_id, overseas, ì¡ë‹¤.

- addable
    - permission ì²´í¬. -> user.checkLimitì´ ë­í‚¹ì¶”ì  ì„œë¹„ìŠ¤ 
- POST tracking/keyword/:trackingId


---
#### 3. ì‹œê³„ì—´ë¡œ ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” ì„œë¹„ìŠ¤
serverì—ì„  crawler/procs/product_tracking.js
crawlProduct í•¨ìˆ˜. 

ì´ ë‘ ê°€ì§€. 
- getProductDetailInfoViaWeb ğŸ‡ : SSR doc
- getProductDetailInfo ğŸ‡ : ë¹„ê³µì‹ API



---
### 2. ë„ë©”ì¸ ì„¤ê³„
#### ğŸ¥ ë­í‚¹ì¶”ì  ìœ ìŠ¤ì¼€ì´ìŠ¤ì™€ ë­í‚¹í‚¤ì›Œë“œìƒí’ˆ ë„ë©”ì¸.




---
### 3. ì½”ë“œì‘ì„±


---
### ë°ì´í„° ì¤‘ì‹¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ OOPë€
ë¸”ë£¸ë²„ê·¸ì™€ ê°™ì´ ë‹¤ì–‘í•œ ë°ì´í„°ë¥¼ ê°€ì§€ê³  ì„œë¹„ìŠ¤ë¥¼ í•˜ëŠ” ê²½ìš° (ê° í…Œì´ë¸”ë“¤ì€ relationì„ ë§ºê³ ìˆê³ , ì‹œê³„ì—´ ë°ì´í„°ì™€ ì—°ê²°ë˜ì–´ìˆìŒ) ì–´ë–¤ì‹ìœ¼ë¡œ OOP ì„¤ê³„ë¥¼ í•˜ë©´ ì¢‹ì„ê¹Œ?

1. ì²˜ìŒì— ì¢…ëª©ì„ ë“±ë¡í•˜ë©´
ê·¸ ì¢…ëª©ì— ëŒ€í•œ ë°ì´í„°ë¥¼ ì—¬ëŸ¬ê³³ì—ì„œ ë¶ˆëŸ¬ì˜¨ í›„ íŒŒì‹±í•´ì„œ 
í•´ë‹¹ ì¢…ëª©ì— ëŒ€í•œ ë°ì´í„°ë¥¼ DBì— ì €ì¥í•´
2. ê·¸ ì¢…ëª©ì— ëŒ€í•œ í…Œë§ˆ íƒœê·¸ë¥¼ ë“±ë¡í•˜ë©´
í…Œë§ˆ ì¢…ëª© ìˆ˜ìµë¥ ì—ì„œ í•´ë‹¹ ì¢…ëª©ì´ ëª‡ë²ˆì§¸ì¸ì§€ ì¶”ì í•´ì„œ ê¸°ë¡í•´.
3. ì‹œê³„ì—´ë¡œ ë§¤ì¼ ì‚¬ìš©ìë“¤ì´ ë“±ë¡í•œ ì¢…ëª©ê³¼ ê´€ë ¨ í…Œë§ˆ íƒœê·¸ì— ëŒ€í•´ 
í…Œë§ˆ ìˆ˜ìµë¥ ì—ì„œì˜ ì¢…ëª© ìˆœìœ„ë¥¼ ê¸°ë¡í•´
4. ê·¸ ì¢…ëª©ì— ëŒ€í•œ ë°ì´í„°ë¥¼ ë§¤ì¼ ë¶ˆëŸ¬ì™€ì„œ ì‹œê³„ì—´ë¡œ ë°ì´í„°ë¥¼ ì €ì¥í•´

âƒâƒâƒâƒâƒâƒâƒâƒâƒ
Asset í´ë˜ìŠ¤
- ê° ìì‚°/ì¢…ëª©ì„ ê°ì²´ë¡œ í‘œí˜„í•œë‹¤
- ì†ì„±: ì¢…ëª© í‹°ì»¤, ê´€ë ¨ ë°ì´í„°(ê°€ê²©, ê±°ë˜ëŸ‰ ë“±), í…Œë§ˆ íƒœê·¸ ë“±
- ë©”ì†Œë“œ: ìì‚° ë°ì´í„° ë¡œë“œ, ìì‚° ë°ì´í„° ì—…ë°ì´íŠ¸, ìì‚° í…Œë§ˆ íƒœê·¸ ê´€ë¦¬

DataManager í´ë˜ìŠ¤
- ë°ì´í„° ì†ŒìŠ¤ë¡œë¶€í„° ìì‚° ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê³  íŒŒì‹±í•˜ëŠ” ì—­í• 
- ë©”ì†Œë“œ: ì™¸ë¶€ API í˜¸ì¶œ, ë°ì´í„° íŒŒì‹±, DB ì €ì¥/ì—…ë°ì´íŠ¸

í…Œë§ˆ í´ë˜ìŠ¤ (ë‚´ ê²½ìš° í‚¤ì›Œë“œ)
- ì†ì„±: í…Œë§ˆID, ì´ë¦„, í¬í•¨ëœ ìì‚° ëª©ë¡ì€ ë³„ë„ í…Œì´ë¸”

RankingManager í´ë˜ìŠ¤
- ë§¤ì¼ ë­í‚¹ì„ ì—…ë°ì´íŠ¸í•œë‹¤
- ë©”ì†Œë“œ: ì¼ë³„ ìˆœìœ„ ê³„ì‚°
    - ranking_keyword_products
        - ë­í‚¹ì— ëŒ€í•œ ì •ë³´ëŠ” RankingManagerë§Œì´ ì¡°ì‘í•  ìˆ˜ ìˆë‹¤.
        - í‚¤ì›Œë“œ ë“±ë¡ì˜ ì£¼ì²´ëŠ” ì‚¬ìš©ìì§€ë§Œ, ë­í‚¹ì„ ì €ì¥í•˜ëŠ”ê±´ ë§¤ë‹ˆì €ì˜ ì—­í• ì´ë‹¤.

UserInterface í´ë˜ìŠ¤
- ì‚¬ìš©ì ì…ë ¥ì„ ë°›ê³  ê²°ê³¼ë¥¼ ì¶œë ¥í•œë‹¤
- ë©”ì†Œë“œ: asset ë“±ë¡, í…Œë§ˆ íƒœê·¸ ë“±ë¡, ê²°ê³¼ ì¡°íšŒ


---
ê°€ìƒì˜ ë§¤ë‹ˆì €ê°€ í•µì‹¬ì ì¸ í–‰ë™ì„ ìˆ˜í–‰í•˜ëŠ” êµ¬ì¡°ëŠ” ê´œì°®ì€ê°€?
ì•„ì´í…œìŠ¤ì¹´ìš°íŠ¸ì—ëŠ” Theaterì™€ ê°™ì€ ì¡´ì¬ê°€ ì—†ë‹¤.
ì„œë¹„ìŠ¤ ì°¨ì›ì˜ ê°€ìƒì˜ ë§¤ë‹ˆì €ê°€ ì¡´ì¬í•  ë¿.
tracking productëŠ” ê·¸ ìì²´ë¡œ í–‰ë™ì„ í•  ìˆ˜ ìˆëŠ” ì£¼ì²´ë¼ ìƒê°í•˜ê³ ì‹¶ì§€ë§Œ
ìƒìƒì´ ì•ˆê°„ë‹¤.
ë¬¼ë¡  `bag`ê°€ ìŠ¤ìŠ¤ë¡œ ìì‹ ì˜ í˜„ê¸ˆì–‘ì„ ë³´ê³  í‹°ì¼“ì„ ë„£ëŠ” ê²ƒê¹Œì§€ í•  ìˆ˜ ìˆì§€ë§Œ.
ì •ë§ë¡œ `tracking product`ê°€ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë©”ì„œë“œë¥¼ ê°–ê³ ìˆì–´ì•¼ í•˜ëŠ”ì§€ëŠ” ì˜ë¬¸.


```
const trackingProduct = dataManager
                .createTrackingProductByScraping(user, url);
```

âƒâƒâƒâƒâƒâƒâƒâƒ
ğŸ‹ ì·¨ì§€
ìƒˆë¡­ê²Œ. ì˜¤ë¸Œì íŠ¸ ê´€ì ì—ì„œ.
ê°€ìƒì˜ DataManager, RankinManagerë¥¼ ë‘ê³ 
ì´ ì˜¤ë¸Œì íŠ¸ê°€ ì™¸ë¶€ ìš”ì²­ì„ í•˜ê±°ë‚˜ ë­í‚¹ ì¶”ì ì„ í•˜ë„ë¡.

ìœ ìŠ¤ì¼€ì´ìŠ¤ë¥¼ í›¨ì”¬ ì„¸ì„¸í•˜ê²Œ íŒŒì•…í•´ì•¼í•œë‹¤.
ë¶ˆë¦¬ëŠ” ëª¨ë“  ì»¨íŠ¸ë¡¤ëŸ¬(ë„¤íŠ¸ì›Œí¬íƒ­),
**ëª¨ë“  í•¨ìˆ˜ë“¤ê¹Œì§€.
ê·¸ëŸ°ë‹¤ìŒ ë” ì„¸ì„¸í•œ ë²”ìœ„ë¡œ ìœ ìŠ¤ì¼€ì´ìŠ¤ë¥¼ ë¬¶ìœ¼ë¼ëŠ” ë§ì´ë‹¤**

âƒâƒâƒâƒâƒâƒâƒâƒâƒ
ì ê¹.
ìœ ì €ê°€ í•˜ëŠ” í–‰ë™ - ìƒí’ˆë“±ë¡, í‚¤ì›Œë“œ ë“±ë¡, ê²°ê³¼ ì¡°íšŒ 
ì¡°ì°¨ë„ ì–´ë–¤ ì¸í„°í˜ì´ìŠ¤ í´ë˜ìŠ¤ë¼ëŠ” ë§ì¸ê°€?
tracking-apiì—ì„œëŠ” ì–´ë–¤ í´ë˜ìŠ¤ì—ì„œ ì´ëŸ° ë©”ì†Œë“œë“¤ì„ ë‹¬ì•„ë†¨ì„ê¹Œ?

ì‚¬ì‹¤ Service Classê³ ..
ë”°ë¼ì„œ ìœ ìŠ¤ì¼€ì´ìŠ¤ëŠ”
- ìƒí’ˆë“±ë¡ : RegisterTrackingProduct
- í‚¤ì›Œë“œ ë“±ë¡: RegisterKeyword
    - ì—¬ê¸°ì„œ ë­í‚¹ ì¶”ì ë„ ë“¤ì–´ê°€ëŠ”ë°
    - ìˆ˜í–‰ ì£¼ì²´ê°€ RankingManager í´ë˜ìŠ¤ë‹¤. 
- ê²°ê³¼ ì¡°íšŒ: ViewData

#### UseCase @@@
1. ProductRegister UseCase 
- DataManager Classì˜ 

2. KeywordRanking UseCase

3. TrackingReport UseCase


4. Batch - Cluster (ì´ê±´ ë‚˜ì¤‘ì—)

âƒâƒâƒâƒâƒâƒâƒâƒâƒ
ê·¸ë ‡ë‹¤. ì†Œí”„íŠ¸ì›¨ì–´ì˜ ë™ì‘ì€ ì‚¬ì‹¤ ì–´ë–¤ ê°€ê²Œì˜ íŒë§¤ì›ì´ í•˜ëŠ” í–‰ë™ê³¼ë„ ê°™ë‹¤.
ì´ íŒë§¤ì›ì˜ í–‰ë™ì€, 
- ì‚¬ìš©ìì˜ ë©¤ë²„ì‹­ ë“±ê¸‰ì„ ë³´ê³  ìƒí’ˆì„ ë“±ë¡í•´ë„ ëœë‹¤ ì•ˆëœë‹¤ë¥¼ íŒë‹¨í•˜ê³ ,
- ìƒí’ˆì„ ë“±ë¡í•  ê²½ìš° 
    - DataManagerì—ê²Œ ìƒí’ˆ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ ê²ƒì„ ìš”ì²­í•˜ê³  (ë°ì´í„° ë“±ë¡ ê¶Œí•œ ìœ„ì„)
    - ì´ DataManagerëŠ” DB ê¸°ë¡ê¹Œì§€ ì™„ë£Œí•œë‹¤.
- í‚¤ì›Œë“œë¥¼ ë“±ë¡í•  ê²½ìš°


---
#### ë°œìƒì˜ ì „í™˜
ì‚¬ì‹¤ ê·¸ëŸ° ìƒê°ë„ í•´ë³¸ë‹¤.
ëª¨ë“  ì•Œê³ ë¦¬ì¦˜ ë¬¸ì œë‚˜ ì¼í•˜ë©´ì„œ ë§ˆì£¼ì¹˜ëŠ” OOP ì„¤ê³„ë“¤ì„-
ë¸”ë£¸ë²„ê·¸ì™€ ê¸ˆìœµì‹œì¥ì˜ ë‹¤ì´ë‚´ë¯¹í•œ ìƒì„±ê³¼ ì¢…ë£Œì— ë¹—ëŒ€ì–´ ìƒê°í•´ë³´ë©´
ëª¨ë“  ê²ƒì´ ë‹¤ë¥´ê²Œ ë³´ì¸ë‹¤ëŠ” ê²ƒì„..


---
detailInfoë¥¼ ì €ì¥í•˜ëŠ” ë‹¤ë¥¸ ë¶€ë¶„.
crawlProduct
- ë°°ì¹˜: 
crawler/bin/product_tracking.js, 
utils/batch/product_tracking.js
- 

ì ê¹.
ìœ ì € íŠ¸ë˜í‚¹ ì •ë³´ ì¶”ê°€ëŠ” 
ìœ ì €ê°€ ì§ì ‘ í•˜ëŠ” ê²ƒì´ ì•„ë‹Œê°€?
ì ì–´ë„ ë“±ë¡í•˜ëŠ” í–‰ìœ„ ìì²´ëŠ” 
User.buyì²˜ëŸ¼
User.register ë¼ë˜ê°€..


---
#### ì •ê·œí™”ê°€ ì˜ ë˜ì–´ìˆìœ¼ë©´ relationì´ í•„ìš”ì—†ë‹¤

 * @@@ ì—”í„°í‹° ì •ì˜ì‹œ OneToMany ê´€ê³„ ë„£ì„ ê²ƒì¸ê°€? êµ³ì´? 
 * ì •ê·œí™”ê°€ ì˜ ë˜ì–´ìˆì–´ì„œ. tracking_productì˜ urlì´ ë³€ê²½ë˜ë”ë¼ë„ ë§¤í•‘í…Œì´ë¸”ì€ id í”„ë¼ì´ë¨¸ë¦¬í‚¤ë§Œ ì°¸ì¡°í•˜ê³  ìˆìœ¼ë¯€ë¡œ.
 * select í•´ì˜¤ë©´ ê·¸ë§Œ.


 ---
#### ğŸ‡ ì½”ë“œë¥¼ ë¶„ì„í•  ë•Œ ê°€ì¥ ì¤‘ìš”í•œ ê²ƒ
ì›¹ì„ ë©´ë°€íˆ ì‚´í´ë³´ëŠ” ê²ƒ.

Flow
í•œë²ˆì˜ í˜¸ì¶œì—ì„œ getProductInfo, getProdudctDetailInfo . 
ì „ìëŠ” ì›¹í˜ì´ì§€ doc ìì²´, í›„ìëŠ” ë¹„ê³µì‹ API. 

ë‘ êµ°ë°ì—ì„œ í¬ë¡¤ë§ì„ í•´ì„œ ê°ê°ì˜ DB í…Œì´ë¸”ì— ì €ì¥ì„ í•˜ê³  ìˆì—ˆê³ .
ì •ë§ë¡œ í•˜ë‚˜ë¡œ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ë‚˜? ë¼ëŠ” ìƒê°.

getProductDetailInfoì— ë³´ë‹ˆ `reviewAmount`ë¼ëŠ” ë°ì´í„°ê°€ í•„ìš”í•´ì„œ 
ì¶”ê°€ í¬ë¡¤ë§ ìš”ì²­ì„ í•˜ëŠ” ê²ƒ ê°™ê³ .
ê·¸ëŸ°ë° reviewAmountë¥¼ í•„í„°ì— ê²€ìƒ‰í•´ë³´ë‹ˆ(Fetch ë§ê³  ì „ì²´)
Docì— ìˆëŠ” ê²ƒì„ ë°œê²¬.
ê·¸ëŸ¼ ì‚¬ì‹¤ ì›¹í˜ì´ì§€ í¬ë¡¤ë§ í•œë²ˆìœ¼ë¡œ ë‘˜ë‹¤ êµ¬í•  ìˆ˜ ìˆëŠ”ê±°ì˜€ìŒ.

ì´ë•Œ ê¶ê¸ˆí•´ì§€ëŠ” ê±´
ğŸ’ ë„¤ì´ë²„ëŠ” ì´ ìŠ¤ë§ˆíŠ¸ìŠ¤í† ì–´ ì›¹í˜ì´ì§€ë¥¼ ë§Œë“¤ë•Œ í´ë¼ì´ì–¸íŠ¸ì— ë°ì´í„°ë¥¼ ì–´ë–¤ì‹ìœ¼ë¡œ ì „ë‹¬í•˜ëŠ”ê±¸ê¹Œ?
docì— ë³´ë©´ `window.__PRELOADED_STATE__` í•„ë“œì— í•µì‹¬ ì •ë³´ë“¤ì´ ìˆëŠ”ë°, ì„œë²„ê°€ í•„ìš”í•œ ì •ë³´ë¥¼ ì¼ë‹¨ ë‹¤ ì£¼ëŠ”êµ¬ë‚˜.
ì´ê±´ **ì„œë²„ì‚¬ì´ë“œ ë Œë”ë§** ë°©ì‹ìœ¼ë¡œ í•˜ê³  ìˆë‹¤ëŠ” ì‚¬ì‹¤. 
**ìµœì‹  ì›¹ í”„ë ˆì„ì›Œí¬- Next íŠ¸ë Œë“œ**ë¥¼ ì•Œë©´ ë°”ë¡œ ë– ì˜¤ë¥¼ ë§Œí•œ ê²ƒë“¤.

ğŸ’ getProductDetailInfo ì—ì„œ ë¹„ê³µì‹ API URL ì£¼ì†Œë¥¼ ë§Œë“¤ë•Œ,
ì´ëŸ° APIê°€ ë¶ˆë¦°ë‹¤ëŠ” ì‚¬ì‹¤ì„ ì–´ë–»ê²Œ ì•Œì•˜ì„ê¹Œ?
ì´ê±´ ì¨ë´ì•¼ í•¨.
í˜ì´ì§€ ìƒë‹¨ ë¦¬ìŠ¤íŠ¸ë¥¼ ì´ê²ƒì €ê²ƒ í´ë¦­í•´ë³´ë©´
í•„ìš”í•œ ë¶€ë¶„ë§Œ ìƒˆë¡œ ë Œë”ë§í•œë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆê³ .
ì´ë•Œ Fetchê°€ ë„¤íŠ¸ì›Œí¬ íƒ­ì— ì°í˜.
ì´ APIë¥¼ ì“°ëŠ”ê±°ë‹¤.

ê·¸ëŸ¼ ìŠ¤ë§ˆíŠ¸ìŠ¤í† ì–´ í¬ë¡¤ë§ì€
1. Web
2. closed API

ë‘˜ ë‹¤ ì“°ëŠ” ì´ìœ ê°€ ë­˜ê¹Œ?
ì¼ë‹¨ 1.Doc í¬ë¡¤ë§ì€ ë¬´ì¡°ê±´ í•„ìš”í•¨
2ë¥¼ ì“°ë ¤ë©´ channelUidë¥¼ ì•Œì•„ì•¼í•´ì„œ.

2ëŠ” ì›ë˜ ì‹œê³„ì—´ ë°ì´í„° ìˆ˜ì§‘ì„ ìœ„í•´ ì“°ê³ ìˆìŒ.
ë§¤ë²ˆ Doc ë¶ˆëŸ¬ì™€ì„œ íŒŒì‹±í•˜ê¸°ë³´ë‹¤
í•„ìš”í•œ ë°ì´í„°ë§Œ ë¶ˆëŸ¬ì˜¤ëŠ” APIë¥¼ ì§ì ‘ í˜¸ì¶œí•´ í•œë²ˆì— ë°°ì¹˜ ìˆ˜ì§‘í•˜ëŠ”ê±°ê² ì§€. 

ê·¸ëŸ¼ êµ¬ë¹„í•´ë‘¬ì•¼ í•  ìŠ¤ë§ˆíŠ¸ìŠ¤í† ì–´ í¬ë¡¤ë§ ìš”ì²­ì€ ë‘ ê°œ.
1. ìŠ¤ë§ˆíŠ¸ìŠ¤í† ì–´ URL doc
- ì—¬ê¸°ì„œ íŒŒì‹±ì´ ë‘ ê°€ì§€ì„.
    - 1) nvmid ë“± ê¸°ë³¸ ì •ë³´
    - 2) reviewAmount ë“± ë””í…Œì¼ ì •ë³´ -> ì´ê²Œ getDetailInfo
2. ë¹„ê³µì‹ API
- `https://smartstore.naver.com/i/v2/channels/${channelUid}/products/${mallPid}?withWindow=false`

